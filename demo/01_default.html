<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>default demo</title>
    <style>
        .box {
            position: absolute;
            width: 100%;
            top: 0;
            left: 0;
            margin: auto;
            background: #2e6da4;
            transition-duration: 0.5s;
        }

        .code-block {
            background-color: black;
            color: white;
            width: 500px;
            width: fit-content;
            text-align: left;
            margin: auto;
            padding: 20px;
        }

        .color-golden {
            color: #ec971f
        }

        .color-yellow {
            color: yellow
        }

        .color-blue {
            color: #2e6da4;
        }

        .color-green {
            color: #449d44;
        }

        .color-gray {
            color: gray;
        }

        .color-peru {
            color: peru;
        }

        .color-aqua {
            color: aqua;
        }

        .color-purple {
            color: purple;
        }
        #btn{
            width: 200px;
        }
    </style>
</head>
<body>
<div class="box">
    <div style="text-align: center;margin: auto auto 50px;z-index: 9999">
        <h2>多触发事件Mick</h2>
        <div class="code-block">
            <label class="color-golden">var</label>
            myMick =
            <label class="color-golden">new</label>
            <label class="color-yellow"> Mick</label>
            (<label class="color-blue">*最高点击次数【必选、数字类型】</label>
            <br>
            ,<label class="color-green">*"执行事件【必选，可填多个，用英文分号或空格分开，字符串类型】"</label>
            <br>
            ,<label class="color-peru">"预处理事件（达到点击次数后立刻执行）【可选，可填多个，用英文分号或空格分开，字符串类型】"</label>
            <br>
            ,<label class="color-aqua">"点击间隔【可选，可填多个，用英文分号或空格分开，字符串类型】"</label>
            <br>
            ,<label class="color-aqua">"结束事件【可选，限制一个，字符串类型】"</label>
            )<label class="color-golden">;</label>
            <br>
        </div>
        <h3>首先来看看效果：
            <button id="btn" onclick="cdClick()">单击/双击/三击</button>
        </h3>
        <h3>实现代码</h3>
        <div class="code-block">
            <label class="color-golden">var</label>
            myMick =
            <label class="color-golden">new</label>
            <label class="color-yellow"> Mick</label>
            (<label id="test-times" onclick="swhdClick(this.id,'ipt-test-times')" class="color-blue">3</label>
            <input value="3" style="display: none" id="ipt-test-times"
                   onblur="document.getElementById('test-times').innerHTML=this.value;showOrHidden(this.id,'test-times');changeTimes(cdmick,this.value)">,
            "<label id="test-func" onclick="swhdClick(this.id,'ipt-test-func')" class="color-green">func1 func1('red') func1('#2e6da4')</label>
            <input value="func1 func1('red') func1('#2e6da4')" style="display: none" id="ipt-test-func"
                   onblur="document.getElementById('test-func').innerHTML=this.value;showOrHidden(this.id,'test-func');changeFunc(cdmick,this.value)">")<label
                class="color-golden">;</label>
            <br>
            <label class="color-gray">//双击可修改参数</label>
            <br>
            <label class="color-gray">//尝试使用func1(color)函数改变网页背景，func2(color)函数改变字体颜色</label>
            <br>
            <label class="color-gray">//你可以这样使用来让某个次数不执行事件:"func1;;func1"第二次不执行,";func1"第一次不执行</label>
            <br>
            <label class="color-gray">//你可以使用getActiveTimes()来获取上一次连击的次数</label>
            <br>
            <label class="color-yellow">onclick</label>="
            <label class="color-golden">myMick</label>.
            <label class="color-purple">activate</label>()"
            <label class="color-gray">//激活、调用,放在标签里,或者用jQuery绑定</label>
        </div>
        <h3>Mick参数输入规范</h3>
        <div class="code-block">
            所有事件（执行，预处理，结束）只接受函数，不接受js代码;
            <br>如果函数需要带参数，在函数名后面将参数用括号包起来，如func1("red");
            <br>如果需要写入多个函数使用分号；或者空格 分开函数与函数
            <br>如果要让某个函数在指定位置执行，在函数名前将指定位置用[]包起来，如[1]func1,注意：位置由0开始计算;
            <br>如果要让某个区间都执行一个函数，在函数名前将区间用[]包起来,如[1,3]func1表示第二次到第四次点击都执行func1函数
        </div>
        <h3>点击间隔</h3>
        <div class="code-block">
            <label class="color-golden">var</label>
            myMick =
            <label class="color-golden">new</label>
            <label class="color-yellow"> Mick</label>
            (<label onclick="swhdClick(this.id,'ipt-test-times')" class="color-blue">3</label>,"
            <label onclick="swhdClick(this.id,'ipt-test-func')" class="color-green">func1 func1('red') func1('#2e6da4')</label>",
            <label class="color-golden">null</label>,"
            <label onclick="swhdClick(this.id, 'ipt-time-intime')" id="time-intime" class="color-green">190</label>
            <input value="190" style="display: none" id="ipt-time-intime"
                   onblur="document.getElementById('time-intime').innerHTML=this.value;showOrHidden(this.id,'time-intime');changeIntervalTime(cdmick,this.value)">
            ")<label
                class="color-golden">;</label>
            <br>
            <label class="color-gray">//双击可修改间隔参数</label>
            <br>
            <label class="color-gray">//点击间隔默认为190，你可以修改这个值，也可以指定某个次数的间隔值，你可以使用auto来让程序自动帮你调整间隔</label>
            <br>
            <label class="color-gray">//列：“190”第一次的间隔为190后面的间隔为auto，“190 200 300”第一次190，第二次200，第三次300 </label>
            <br>
            <label class="color-gray">//列：“190 auto 200”第一次190，第二次自动，第三次200，“190;;200”同上</label>
            <br>
            <label class="color-gray">//注意：当点击次数达到最大次数时，会立刻执行最大次数对应的函数</label>
        </div>
        <h3>预处理</h3>
        <div class="code-block">
            <label class="color-golden">var</label>
            myMick =
            <label class="color-golden">new</label>
            <label class="color-yellow"> Mick</label>
            (<label onclick="swhdClick(this.id,'ipt-test-times')" class="color-blue">3</label>,
            <label onclick="swhdClick(this.id,'ipt-test-func')" class="color-green">"func1 func1('red') func1('#2e6da4')"</label>,"
            <label id="pre-func" onclick="swhdClick(this.id,'ipt-pre-func')" class="color-golden">null</label>
            <input value="showNumb(grade);showNumb(grade);showNumb(grade)" style="display: none" id="ipt-pre-func"
                   onblur="document.getElementById('pre-func').innerHTML=this.value;showOrHidden(this.id,'pre-func');changePreFunc(cdmick,this.value)">"
            )<label
                class="color-golden">;</label>
            <br>
            <label class="color-gray">//双击可修改预处理参数</label>
            <br>
            <label class="color-gray">//预处理事件可以让你点击到某个次数的时候立即执行某个函数</label>
            <br>
            <label class="color-gray">//他的执行标准和执行事件一致</label>
            <label class="color-gray">//你可以使用getTimes()来获取当前连击次数</label>
            <br>
        </div>
        <h3>补充：调整参数</h3>
        <div class="code-block">
            <label class="color-golden">myMick</label>.
            <label class="color-purple">changeTimes</label>()
            <label class="color-gray">//调整最大点击数</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">changeFunc</label>()
            <label class="color-gray">//调整对应事件</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">changePreFunc</label>()
            <label class="color-gray">//调整预处理事件</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">changeIntervalTime</label>()
            <label class="color-gray">//改变点击间隔</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">getActiveTimes</label>()
            <label class="color-gray">//获取上一次连击次数</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">getTimes</label>()
            <label class="color-gray">//获取当前连击次数</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">endImmediately</label>()
            <label class="color-gray">//立即结束连击并执行事件和结束事件</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">disableImmediately</label>()
            <label class="color-gray">//立即禁用连击事件，并且不执行任何操作</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">getActiveTimes</label>()
            <label class="color-gray">//获取上一次连击次数</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">disable</label>()
            <label class="color-gray">//禁用连击事件，如禁用时已经激活了Mick则会阻止下一次点击，并执行对应事件和结束事件</label>
            <br>
            <label class="color-golden">myMick</label>.
            <label class="color-purple">enable</label>()
            <label class="color-gray">//启用连击事件</label>
            <br>
        </div>
        <h3>补充：点击只是个例子，你可以把Mick放在任何需要计数执行的事件里</h3>
    </div>
</div>

<script src="../JS/mick.js"></script>
<script>
    var cdmick = new Mick(3, "func1 func1('red') func1('#2e6da4')");
    var swhdMick = new Mick(2, ";showOrHidden");

    function swhdClick(id1, id2) {
        swhdMick.changeFunc(";showOrHidden(" + id1 + "," + id2 + ")");
        swhdMick.activate();
    }

    function showNumb(numb) {
        document.getElementById("btn").innerHTML=numb;
    }

    function cdClick() {
        cdmick.activate();
    }

    function changeFunc(elmt, func) {
        elmt.changeFunc(func);
    }

    function changeTimes(elmt, times) {
        elmt.changeTimes(times);
    }

    function changeIntervalTime(elmt, time) {
        elmt.changeIntervalTime(time);
    }

    function changePreFunc(elmt, preFunc) {
        elmt.changePreFunc(preFunc);
    }

    function showOrHidden(id1, id2) {
        var elmt = document.getElementById(id1);
        if (elmt.style.display === "none") {
            elmt.style.display = "inline";
            elmt.focus();
        }
        else elmt.style.display = "none";
        elmt = document.getElementById(id2);
        if (elmt.style.display === "none") {
            elmt.style.display = "inline";
            elmt.focus();
        }
        else elmt.style.display = "none";
    }

    function changeColor(elmt, color) {
        elmt.style.backgroundColor = color;
    }

    function func1(color) {
        if (color == null || color === "") color = "white";
        console.log(color);
        var box = document.getElementsByClassName("box");
        for (var i = 0; i < box.length; i++) {
            changeColor(box[i], color);
        }
    }

    function func2(color) {
        document.body.style.color = color;
    }

</script>
</body>
</html>